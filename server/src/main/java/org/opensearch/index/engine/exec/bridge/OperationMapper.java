/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * The OpenSearch Contributors require contributions made to
 * this file be licensed under the Apache-2.0 license or a
 * compatible open source license.
 */

package org.opensearch.index.engine.exec.bridge;

import org.opensearch.common.annotation.ExperimentalApi;
import org.opensearch.index.VersionType;
import org.opensearch.index.engine.Engine;
import org.opensearch.index.mapper.DocumentMapperForType;
import org.opensearch.index.mapper.SourceToParse;

/**
 * Maps operations for indexing.
 */
@ExperimentalApi
public interface OperationMapper {

    /**
     * Prepares an index operation.
     * @param docMapper the document mapper
     * @param source the source to parse
     * @param seqNo the sequence number
     * @param primaryTerm the primary term
     * @param version the version
     * @param versionType the version type
     * @param origin the operation origin
     * @param autoGeneratedIdTimestamp the auto-generated ID timestamp
     * @param isRetry whether this is a retry
     * @param ifSeqNo the conditional sequence number
     * @param ifPrimaryTerm the conditional primary term
     * @return the prepared index operation
     */
    Engine.Index prepareIndex(
        DocumentMapperForType docMapper,
        SourceToParse source,
        long seqNo,
        long primaryTerm,
        long version,
        VersionType versionType,
        Engine.Operation.Origin origin,
        long autoGeneratedIdTimestamp,
        boolean isRetry,
        long ifSeqNo,
        long ifPrimaryTerm
    );

    /**
     * Prepares a delete operation.
     * @param id the document ID
     * @param seqNo the sequence number
     * @param primaryTerm the primary term
     * @param version the version
     * @param versionType the version type
     * @param origin the operation origin
     * @param ifSeqNo the conditional sequence number
     * @param ifPrimaryTerm the conditional primary term
     * @return the prepared delete operation
     */
    Engine.Delete prepareDelete(
        String id,
        long seqNo,
        long primaryTerm,
        long version,
        VersionType versionType,
        Engine.Operation.Origin origin,
        long ifSeqNo,
        long ifPrimaryTerm
    );
}
