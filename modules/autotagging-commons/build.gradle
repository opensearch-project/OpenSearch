/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * The OpenSearch Contributors require contributions made to
 * this file be licensed under the Apache-2.0 license or a
 * compatible open source license.
 */

apply plugin: 'opensearch.internal-cluster-test'

opensearchplugin {
  name = "rule-framework"
  description = 'OpenSearch Rule Framework plugin'
  classname = 'org.opensearch.rule.RuleFrameworkPlugin'
}

dependencies {
  api project("spi")
  api project("common")

  testImplementation(project(":test:framework")) {
    exclude group: 'org.opensearch', module: 'opensearch-core'
  }

  internalClusterTestImplementation(project(":test:framework")) {
    exclude group: 'org.opensearch', module: 'server'
  }

  internalClusterTestImplementation(project(":plugins:workload-management")) {
    exclude group: 'org.opensearch', module: 'server'
  }
}

tasks.named("internalClusterTest").configure {
  // TODO: these run faster with C2 only because they run for so, so long
  jvmArgs -= '-XX:TieredStopAtLevel=1'
}
