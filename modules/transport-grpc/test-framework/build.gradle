/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * The OpenSearch Contributors require contributions made to
 * this file be licensed under the Apache-2.0 license or a
 * compatible open source license.
 */

apply plugin: 'opensearch.build'
apply plugin: 'opensearch.internal-cluster-test'

description = 'gRPC Transport Test Framework for Plugin Unit and Integration Tests'

dependencies {
  api project(':test:framework')
  api project(':modules:transport-grpc')
  api project(path: ':modules:transport-grpc', configuration: 'testArtifacts')

  api "org.opensearch:protobufs:${versions.opensearchprotobufs}"
  api "io.grpc:grpc-protobuf:${versions.grpc}"
  api "io.grpc:grpc-api:${versions.grpc}"
  api "io.grpc:grpc-core:${versions.grpc}"
  api "io.grpc:grpc-netty-shaded:${versions.grpc}"
  api "io.grpc:grpc-protobuf-lite:${versions.grpc}"
  api "io.grpc:grpc-protobuf:${versions.grpc}"
  api "io.grpc:grpc-services:${versions.grpc}"
  api "io.grpc:grpc-stub:${versions.grpc}"
  api "io.grpc:grpc-util:${versions.grpc}"

  api "junit:junit:${versions.junit}"
  api "org.hamcrest:hamcrest:${versions.hamcrest}"

  compileOnly "com.google.code.findbugs:jsr305:3.0.2"
  runtimeOnly "com.google.guava:guava:${versions.guava}"
  implementation "com.google.guava:failureaccess:1.0.2"
  implementation "io.perfmark:perfmark-api:0.27.0"

  testImplementation project(':test:framework')
  internalClusterTestImplementation project(':modules:transport-grpc')
}
